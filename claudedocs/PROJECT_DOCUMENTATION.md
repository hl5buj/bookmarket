# BookMarket API - í”„ë¡œì íŠ¸ ì¢…í•© ë¬¸ì„œ

## ğŸ“‹ ëª©ì°¨
1. [í”„ë¡œì íŠ¸ ê°œìš”](#í”„ë¡œì íŠ¸-ê°œìš”)
2. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
3. [ì„¤ì¹˜ ë° ì‹¤í–‰](#ì„¤ì¹˜-ë°-ì‹¤í–‰)
4. [API ì—”ë“œí¬ì¸íŠ¸](#api-ì—”ë“œí¬ì¸íŠ¸)
5. [ì»´í¬ë„ŒíŠ¸ ìƒì„¸](#ì»´í¬ë„ŒíŠ¸-ìƒì„¸)
6. [ë°ì´í„° êµ¬ì¡°](#ë°ì´í„°-êµ¬ì¡°)
7. [ì¸ì¦ ë° ê¶Œí•œ](#ì¸ì¦-ë°-ê¶Œí•œ)
8. [ê°œë°œ ê°€ì´ë“œ](#ê°œë°œ-ê°€ì´ë“œ)

---

## í”„ë¡œì íŠ¸ ê°œìš”

### ğŸ“Œ í”„ë¡œì íŠ¸ ì •ë³´
- **ì´ë¦„**: BookMarket API
- **ë²„ì „**: 1.0.0
- **ì„¤ëª…**: ì˜¨ë¼ì¸ ì„œì  API - ì±… ì¡°íšŒ, ì£¼ë¬¸, ê´€ë¦¬ì ê¸°ëŠ¥
- **í”„ë ˆì„ì›Œí¬**: FastAPI
- **ëª©ì **: FastAPI í•™ìŠµ ë° ì‹¤ìŠµ

### ğŸ¯ ì£¼ìš” ê¸°ëŠ¥
- **ì±… ê´€ë¦¬**: ì±… ì¡°íšŒ, ê²€ìƒ‰, ì¹´í…Œê³ ë¦¬ë³„ í•„í„°ë§
- **ì£¼ë¬¸ ì‹œìŠ¤í…œ**: ì£¼ë¬¸ ìƒì„±, ì£¼ë¬¸ ë‚´ì—­ ì¡°íšŒ
- **ê´€ë¦¬ì ê¸°ëŠ¥**: ì±… ë“±ë¡, ì¬ê³  ê´€ë¦¬, ì±… ì‚­ì œ
- **ì‚¬ìš©ì ì¸ì¦**: ì´ë©”ì¼ ê¸°ë°˜ ê°„ë‹¨ ì¸ì¦ (í•™ìŠµìš©)

---

## ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°
```
bookmarket/
â”œâ”€â”€ main.py              # FastAPI ì• í”Œë¦¬ì¼€ì´ì…˜ ì§„ì…ì 
â”œâ”€â”€ dependencies.py      # ê³µí†µ ì˜ì¡´ì„± (ì¸ì¦, í˜ì´ì§€ë„¤ì´ì…˜)
â”œâ”€â”€ routers/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ books.py        # ì±… ê´€ë ¨ API (ê³µê°œ + ê´€ë¦¬ì)
â”‚   â””â”€â”€ orders.py       # ì£¼ë¬¸ ê´€ë ¨ API
â”œâ”€â”€ claudedocs/         # í”„ë¡œì íŠ¸ ë¬¸ì„œ
â””â”€â”€ README.md           # í”„ë¡œì íŠ¸ ì†Œê°œ
```

### ğŸ—ï¸ ê³„ì¸µ êµ¬ì¡°
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         main.py (ì§„ì…ì )             â”‚
â”‚   - FastAPI ì•± ìƒì„±                 â”‚
â”‚   - ë¼ìš°í„° ë“±ë¡                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                 â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
â”‚ books  â”‚      â”‚ orders   â”‚
â”‚ router â”‚      â”‚ router   â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
    â”‚                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ dependencies.py â”‚
    â”‚  - ì¸ì¦         â”‚
    â”‚  - í˜ì´ì§€ë„¤ì´ì…˜  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ì„¤ì¹˜ ë° ì‹¤í–‰

### ğŸ“¦ í•„ìˆ˜ ìš”êµ¬ì‚¬í•­
```bash
Python 3.8+
FastAPI
Uvicorn
```

### ğŸš€ ì„¤ì¹˜ ë°©ë²•
```bash
# 1. ì €ì¥ì†Œ í´ë¡ 
git clone https://github.com/hl5buj/bookmarket.git
cd bookmarket

# 2. ê°€ìƒí™˜ê²½ ìƒì„± (ê¶Œì¥)
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# 3. ì˜ì¡´ì„± ì„¤ì¹˜
pip install fastapi uvicorn
```

### â–¶ï¸ ì‹¤í–‰ ë°©ë²•
```bash
# ê°œë°œ ì„œë²„ ì‹¤í–‰
uvicorn main:app --reload

# ì‹¤í–‰ ì™„ë£Œ í›„ ì ‘ì†
# - API ë¬¸ì„œ: http://127.0.0.1:8000/docs
# - ë£¨íŠ¸: http://127.0.0.1:8000/
```

---

## API ì—”ë“œí¬ì¸íŠ¸

### ğŸŒ ê¸°ë³¸ ì •ë³´
- **Base URL**: `http://127.0.0.1:8000`
- **API ë¬¸ì„œ**: `http://127.0.0.1:8000/docs` (Swagger UI)

### ğŸ“š Books API (ê³µê°œ)

#### 1. ì±… ëª©ë¡ ì¡°íšŒ
```http
GET /books?skip=0&limit=10
```
**ì„¤ëª…**: ëª¨ë“  ì±… ëª©ë¡ì„ í˜ì´ì§€ë„¤ì´ì…˜í•˜ì—¬ ì¡°íšŒ

**Query Parameters**:
- `skip` (int, optional): ê±´ë„ˆë›¸ í•­ëª© ìˆ˜ (ê¸°ë³¸ê°’: 0)
- `limit` (int, optional): ê°€ì ¸ì˜¬ í•­ëª© ìˆ˜ (ê¸°ë³¸ê°’: 10, ìµœëŒ€: 50)

**Response**:
```json
{
  "total": 3,
  "skip": 0,
  "limit": 10,
  "books": [
    {
      "id": 1,
      "title": "íŒŒì´ì¬ ë§ˆìŠ¤í„°í•˜ê¸°",
      "category": "í”„ë¡œê·¸ë˜ë°",
      "price": 35000,
      "stock": 50
    }
  ]
}
```

#### 2. ì±… ìƒì„¸ ì¡°íšŒ
```http
GET /books/{book_id}
```
**ì„¤ëª…**: íŠ¹ì • ì±…ì˜ ìƒì„¸ ì •ë³´ ì¡°íšŒ

**Path Parameters**:
- `book_id` (int): ì±… ID

**Response**:
```json
{
  "id": 1,
  "title": "íŒŒì´ì¬ ë§ˆìŠ¤í„°í•˜ê¸°",
  "category": "í”„ë¡œê·¸ë˜ë°",
  "price": 35000,
  "stock": 50
}
```

#### 3. ì¹´í…Œê³ ë¦¬ë³„ ê²€ìƒ‰
```http
GET /books/search/category?category=í”„ë¡œê·¸ë˜ë°&skip=0&limit=10
```
**ì„¤ëª…**: íŠ¹ì • ì¹´í…Œê³ ë¦¬ì˜ ì±…ë§Œ í•„í„°ë§í•˜ì—¬ ì¡°íšŒ

**Query Parameters**:
- `category` (str): ì¹´í…Œê³ ë¦¬ ì´ë¦„
- `skip` (int, optional): ê±´ë„ˆë›¸ í•­ëª© ìˆ˜
- `limit` (int, optional): ê°€ì ¸ì˜¬ í•­ëª© ìˆ˜

**Response**:
```json
{
  "category": "í”„ë¡œê·¸ë˜ë°",
  "total": 2,
  "results": [
    {
      "id": 1,
      "title": "íŒŒì´ì¬ ë§ˆìŠ¤í„°í•˜ê¸°",
      "category": "í”„ë¡œê·¸ë˜ë°",
      "price": 35000,
      "stock": 50
    }
  ]
}
```

### ğŸ” Books API (ê´€ë¦¬ì ì „ìš©)

#### 4. ì±… ë“±ë¡
```http
POST /admin/books?email=admin@bookmarket.com&title=...&category=...&price=30000&stock=50
```
**ì„¤ëª…**: ìƒˆë¡œìš´ ì±…ì„ ì‹œìŠ¤í…œì— ë“±ë¡ (ê´€ë¦¬ì ê¶Œí•œ í•„ìš”)

**Query Parameters**:
- `email` (str): ê´€ë¦¬ì ì´ë©”ì¼
- `title` (str): ì±… ì œëª©
- `category` (str): ì¹´í…Œê³ ë¦¬
- `price` (int): ê°€ê²©
- `stock` (int): ì¬ê³  ìˆ˜ëŸ‰

**Response**:
```json
{
  "message": "ì±… ë“±ë¡ ì™„ë£Œ",
  "book": {
    "id": 4,
    "title": "ìƒˆë¡œìš´ ì±…",
    "category": "ì†Œì„¤",
    "price": 30000,
    "stock": 50
  }
}
```

#### 5. ì¬ê³  ìˆ˜ì •
```http
PATCH /admin/books/{book_id}/stock?email=admin@bookmarket.com&stock=100
```
**ì„¤ëª…**: íŠ¹ì • ì±…ì˜ ì¬ê³  ìˆ˜ëŸ‰ ì—…ë°ì´íŠ¸

**Path Parameters**:
- `book_id` (int): ì±… ID

**Query Parameters**:
- `email` (str): ê´€ë¦¬ì ì´ë©”ì¼
- `stock` (int): ìƒˆë¡œìš´ ì¬ê³  ìˆ˜ëŸ‰

**Response**:
```json
{
  "message": "ì¬ê³  ì—…ë°ì´íŠ¸ ì™„ë£Œ",
  "book": {
    "id": 1,
    "title": "íŒŒì´ì¬ ë§ˆìŠ¤í„°í•˜ê¸°",
    "category": "í”„ë¡œê·¸ë˜ë°",
    "price": 35000,
    "stock": 100
  }
}
```

#### 6. ì±… ì‚­ì œ
```http
DELETE /admin/books/{book_id}?email=admin@bookmarket.com
```
**ì„¤ëª…**: ì‹œìŠ¤í…œì—ì„œ ì±… ì‚­ì œ

**Path Parameters**:
- `book_id` (int): ì±… ID

**Query Parameters**:
- `email` (str): ê´€ë¦¬ì ì´ë©”ì¼

**Response**:
```json
{
  "message": "ì±… 1 ì‚­ì œ ì™„ë£Œ"
}
```

### ğŸ›’ Orders API

#### 7. ì£¼ë¬¸ ìƒì„±
```http
POST /orders?email=user@bookmarket.com&book_id=1&quantity=2
```
**ì„¤ëª…**: ìƒˆë¡œìš´ ì£¼ë¬¸ ìƒì„± (ë¡œê·¸ì¸ í•„ìš”)

**Query Parameters**:
- `email` (str): ì‚¬ìš©ì ì´ë©”ì¼
- `book_id` (int): ì£¼ë¬¸í•  ì±… ID
- `quantity` (int): ì£¼ë¬¸ ìˆ˜ëŸ‰

**Response**:
```json
{
  "message": "ì£¼ë¬¸ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤",
  "order": {
    "id": 1,
    "user_email": "user@bookmarket.com",
    "book_id": 1,
    "book_title": "íŒŒì´ì¬ ë§ˆìŠ¤í„°í•˜ê¸°",
    "quantity": 2,
    "total_price": 70000,
    "status": "ì£¼ë¬¸ì™„ë£Œ"
  }
}
```

#### 8. ë‚´ ì£¼ë¬¸ ë‚´ì—­ ì¡°íšŒ
```http
GET /orders/my-orders?email=user@bookmarket.com
```
**ì„¤ëª…**: í˜„ì¬ ì‚¬ìš©ìì˜ ëª¨ë“  ì£¼ë¬¸ ë‚´ì—­ ì¡°íšŒ

**Query Parameters**:
- `email` (str): ì‚¬ìš©ì ì´ë©”ì¼

**Response**:
```json
{
  "user": "ê¹€ë…ì",
  "total_orders": 1,
  "orders": [
    {
      "id": 1,
      "user_email": "user@bookmarket.com",
      "book_id": 1,
      "book_title": "íŒŒì´ì¬ ë§ˆìŠ¤í„°í•˜ê¸°",
      "quantity": 2,
      "total_price": 70000,
      "status": "ì£¼ë¬¸ì™„ë£Œ"
    }
  ]
}
```

---

## ì»´í¬ë„ŒíŠ¸ ìƒì„¸

### ğŸ“„ main.py
**ì—­í• **: FastAPI ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì§„ì…ì 

**ì£¼ìš” ê¸°ëŠ¥**:
- FastAPI ì•± ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ë° ë©”íƒ€ë°ì´í„° ì„¤ì •
- ë¼ìš°í„° ë“±ë¡ (books ê³µê°œ/ê´€ë¦¬ì, orders)
- ë£¨íŠ¸ ì—”ë“œí¬ì¸íŠ¸ ì œê³µ (í™˜ì˜ ë©”ì‹œì§€ ë° ì‚¬ìš©ì ì •ë³´)

**ì½”ë“œ ìœ„ì¹˜**: `main.py:1-25`

**ë¼ìš°í„° ë“±ë¡ ìˆœì„œ**:
1. `books.public_router` - ê³µê°œ ì±… API
2. `books.admin_router` - ê´€ë¦¬ì ì±… API
3. `orders.router` - ì£¼ë¬¸ API

---

### ğŸ”§ dependencies.py
**ì—­í• **: ê³µí†µ ì˜ì¡´ì„± í•¨ìˆ˜ ë° ë°ì´í„°ë² ì´ìŠ¤ ëª¨í‚¹

**ì£¼ìš” ì»´í¬ë„ŒíŠ¸**:

#### 1. `users_db` (dict)
**ì„¤ëª…**: ê°€ì§œ ì‚¬ìš©ì ë°ì´í„°ë² ì´ìŠ¤
**ìœ„ì¹˜**: `dependencies.py:5-16`
**ë°ì´í„°**:
- `admin@bookmarket.com`: ê´€ë¦¬ì ê³„ì •
- `user@bookmarket.com`: ì¼ë°˜ ì‚¬ìš©ì ê³„ì •

#### 2. `get_current_user(email: str)`
**ì„¤ëª…**: ì´ë©”ì¼ë¡œ ì‚¬ìš©ì ì¡°íšŒ ë° ì¸ì¦
**ìœ„ì¹˜**: `dependencies.py:18-33`
**ë°˜í™˜**: ì‚¬ìš©ì ë”•ì…”ë„ˆë¦¬ ë˜ëŠ” 401 ì—ëŸ¬

#### 3. `get_admin_user(email: str)`
**ì„¤ëª…**: ê´€ë¦¬ì ê¶Œí•œ í™•ì¸
**ìœ„ì¹˜**: `dependencies.py:35-47`
**ë°˜í™˜**: ê´€ë¦¬ì ì‚¬ìš©ì ë˜ëŠ” 403 ì—ëŸ¬

#### 4. `pagination_params(skip: int = 0, limit: int = 10)`
**ì„¤ëª…**: í˜ì´ì§€ë„¤ì´ì…˜ íŒŒë¼ë¯¸í„° ê²€ì¦
**ìœ„ì¹˜**: `dependencies.py:49-56`
**ì œí•œ**: ìµœëŒ€ limitëŠ” 50
**ë°˜í™˜**: `{"skip": skip, "limit": limit}`

---

### ğŸ“š routers/books.py
**ì—­í• **: ì±… ê´€ë ¨ API ì—”ë“œí¬ì¸íŠ¸

**ë¼ìš°í„° êµ¬ì¡°**:
- `public_router`: `/books` prefix, ëˆ„êµ¬ë‚˜ ì ‘ê·¼
- `admin_router`: `/admin/books` prefix, ê´€ë¦¬ìë§Œ ì ‘ê·¼

**ë°ì´í„°ë² ì´ìŠ¤**: `books_db` (list)
**ì´ˆê¸° ë°ì´í„°**:
- íŒŒì´ì¬ ë§ˆìŠ¤í„°í•˜ê¸° (í”„ë¡œê·¸ë˜ë°, 35,000ì›, ì¬ê³  50)
- FastAPI ì™„ë²½ ê°€ì´ë“œ (í”„ë¡œê·¸ë˜ë°, 42,000ì›, ì¬ê³  30)
- í•´ë¦¬í¬í„° (ì†Œì„¤, 15,000ì›, ì¬ê³  100)

**ê³µê°œ ì—”ë“œí¬ì¸íŠ¸**:
- `GET /books` - ì±… ëª©ë¡ ì¡°íšŒ (`books.py:27-44`)
- `GET /books/{book_id}` - ì±… ìƒì„¸ ì¡°íšŒ (`books.py:46-53`)
- `GET /books/search/category` - ì¹´í…Œê³ ë¦¬ ê²€ìƒ‰ (`books.py:55-78`)

**ê´€ë¦¬ì ì—”ë“œí¬ì¸íŠ¸**:
- `POST /admin/books` - ì±… ë“±ë¡ (`books.py:82-114`)
- `PATCH /admin/books/{book_id}/stock` - ì¬ê³  ìˆ˜ì • (`books.py:116-132`)
- `DELETE /admin/books/{book_id}` - ì±… ì‚­ì œ (`books.py:134-150`)

---

### ğŸ›’ routers/orders.py
**ì—­í• **: ì£¼ë¬¸ ê´€ë ¨ API ì—”ë“œí¬ì¸íŠ¸

**ë¼ìš°í„° êµ¬ì¡°**:
- `router`: `/orders` prefix, ë¡œê·¸ì¸ ì‚¬ìš©ìë§Œ ì ‘ê·¼

**ë°ì´í„°ë² ì´ìŠ¤**: `orders_db` (list)
**ì™¸ë¶€ ì°¸ì¡°**: `books_db` (routers.booksì—ì„œ ì„í¬íŠ¸)

**ì—”ë“œí¬ì¸íŠ¸**:

#### 1. `POST /orders` - ì£¼ë¬¸ ìƒì„±
**ìœ„ì¹˜**: `orders.py:14-63`
**ë¡œì§**:
1. ì±… ì¡´ì¬ ì—¬ë¶€ í™•ì¸
2. ì¬ê³  ì¶©ë¶„ ì—¬ë¶€ í™•ì¸
3. ì£¼ë¬¸ ìƒì„± ë° ì €ì¥
4. ì±… ì¬ê³  ê°ì†Œ

**ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™**:
- ì¬ê³ ê°€ ë¶€ì¡±í•˜ë©´ 400 ì—ëŸ¬
- ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì±…ì´ë©´ 404 ì—ëŸ¬
- ì£¼ë¬¸ ì™„ë£Œ ì‹œ ìë™ìœ¼ë¡œ ì¬ê³  ì°¨ê°

#### 2. `GET /orders/my-orders` - ë‚´ ì£¼ë¬¸ ë‚´ì—­
**ìœ„ì¹˜**: `orders.py:65-83`
**ë¡œì§**:
1. í˜„ì¬ ì‚¬ìš©ì ì¸ì¦
2. ì‚¬ìš©ìì˜ ì£¼ë¬¸ë§Œ í•„í„°ë§
3. ì£¼ë¬¸ ëª©ë¡ ë°˜í™˜

---

## ë°ì´í„° êµ¬ì¡°

### ğŸ“¦ Book (ì±…)
```python
{
  "id": int,           # ì±… ê³ ìœ  ID
  "title": str,        # ì±… ì œëª©
  "category": str,     # ì¹´í…Œê³ ë¦¬ (ì˜ˆ: "í”„ë¡œê·¸ë˜ë°", "ì†Œì„¤")
  "price": int,        # ê°€ê²© (ì›)
  "stock": int         # ì¬ê³  ìˆ˜ëŸ‰
}
```

### ğŸ“¦ Order (ì£¼ë¬¸)
```python
{
  "id": int,              # ì£¼ë¬¸ ê³ ìœ  ID
  "user_email": str,      # ì£¼ë¬¸í•œ ì‚¬ìš©ì ì´ë©”ì¼
  "book_id": int,         # ì£¼ë¬¸í•œ ì±… ID
  "book_title": str,      # ì£¼ë¬¸í•œ ì±… ì œëª© (ìŠ¤ëƒ…ìƒ·)
  "quantity": int,        # ì£¼ë¬¸ ìˆ˜ëŸ‰
  "total_price": int,     # ì´ ê°€ê²© (price Ã— quantity)
  "status": str           # ì£¼ë¬¸ ìƒíƒœ (ì˜ˆ: "ì£¼ë¬¸ì™„ë£Œ")
}
```

### ğŸ“¦ User (ì‚¬ìš©ì)
```python
{
  "email": str,        # ì‚¬ìš©ì ì´ë©”ì¼ (ê³ ìœ  ì‹ë³„ì)
  "name": str,         # ì‚¬ìš©ì ì´ë¦„
  "role": str          # ì—­í•  ("admin" ë˜ëŠ” "user")
}
```

---

## ì¸ì¦ ë° ê¶Œí•œ

### ğŸ” ì¸ì¦ ë°©ì‹
**í˜„ì¬ êµ¬í˜„**: ê°„ë‹¨ ì´ë©”ì¼ ê¸°ë°˜ ì¸ì¦ (í•™ìŠµìš©)
**ì‹¤ë¬´ ê¶Œì¥**: JWT í† í° ê¸°ë°˜ ì¸ì¦

### ğŸ‘¤ ì‚¬ìš©ì ì—­í• 

#### 1. ì¼ë°˜ ì‚¬ìš©ì (user)
**ì´ë©”ì¼**: `user@bookmarket.com`
**ê¶Œí•œ**:
- âœ… ì±… ëª©ë¡ ì¡°íšŒ
- âœ… ì±… ìƒì„¸ ì¡°íšŒ
- âœ… ì¹´í…Œê³ ë¦¬ ê²€ìƒ‰
- âœ… ì£¼ë¬¸ ìƒì„±
- âœ… ë‚´ ì£¼ë¬¸ ë‚´ì—­ ì¡°íšŒ
- âŒ ì±… ë“±ë¡/ìˆ˜ì •/ì‚­ì œ

#### 2. ê´€ë¦¬ì (admin)
**ì´ë©”ì¼**: `admin@bookmarket.com`
**ê¶Œí•œ**:
- âœ… ëª¨ë“  ì¼ë°˜ ì‚¬ìš©ì ê¶Œí•œ
- âœ… ì±… ë“±ë¡
- âœ… ì¬ê³  ìˆ˜ì •
- âœ… ì±… ì‚­ì œ

### ğŸ›¡ï¸ ê¶Œí•œ ì²´í¬ ë©”ì»¤ë‹ˆì¦˜

#### ì˜ì¡´ì„± ì£¼ì…ì„ í†µí•œ ê¶Œí•œ ê²€ì¦
```python
# ë¡œê·¸ì¸ í•„ìš”
user = Depends(get_current_user)

# ê´€ë¦¬ì ê¶Œí•œ í•„ìš”
user = Depends(get_admin_user)

# ë¼ìš°í„° ë ˆë²¨ ì˜ì¡´ì„± (ëª¨ë“  ì—”ë“œí¬ì¸íŠ¸ì— ì ìš©)
admin_router = APIRouter(
    dependencies=[Depends(get_admin_user)]
)
```

---

## ê°œë°œ ê°€ì´ë“œ

### ğŸ”§ ìƒˆë¡œìš´ ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€í•˜ê¸°

#### 1. ê³µê°œ ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€
```python
# routers/books.py
@public_router.get("/new-endpoint")
def new_public_endpoint():
    return {"message": "ëˆ„êµ¬ë‚˜ ì ‘ê·¼ ê°€ëŠ¥"}
```

#### 2. ì¸ì¦ í•„ìš” ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€
```python
# routers/orders.py
@router.get("/protected")
def protected_endpoint(user: dict = Depends(get_current_user)):
    return {"message": f"ì•ˆë…•í•˜ì„¸ìš”, {user['name']}ë‹˜"}
```

#### 3. ê´€ë¦¬ì ì „ìš© ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€
```python
# routers/books.py
@admin_router.post("/admin-only")
def admin_endpoint(email: str):
    # email íŒŒë¼ë¯¸í„°ë¡œ ìë™ ê´€ë¦¬ì ê²€ì¦ë¨
    return {"message": "ê´€ë¦¬ì ì „ìš©"}
```

### ğŸ“ ìƒˆë¡œìš´ ë¼ìš°í„° ì¶”ê°€í•˜ê¸°

```python
# 1. routers/reviews.py ìƒì„±
from fastapi import APIRouter

router = APIRouter(
    prefix="/reviews",
    tags=["reviews"]
)

@router.get("/")
def get_reviews():
    return {"reviews": []}

# 2. main.pyì— ë¼ìš°í„° ë“±ë¡
from routers import reviews
app.include_router(reviews.router)
```

### ğŸ§ª API í…ŒìŠ¤íŠ¸ ë°©ë²•

#### Swagger UI ì‚¬ìš© (ê¶Œì¥)
```
1. http://127.0.0.1:8000/docs ì ‘ì†
2. í…ŒìŠ¤íŠ¸í•  ì—”ë“œí¬ì¸íŠ¸ ì„ íƒ
3. "Try it out" í´ë¦­
4. íŒŒë¼ë¯¸í„° ì…ë ¥ í›„ "Execute"
```

#### curl ì‚¬ìš©
```bash
# ì±… ëª©ë¡ ì¡°íšŒ
curl http://127.0.0.1:8000/books

# ì£¼ë¬¸ ìƒì„±
curl -X POST "http://127.0.0.1:8000/orders?email=user@bookmarket.com&book_id=1&quantity=2"

# ì±… ë“±ë¡ (ê´€ë¦¬ì)
curl -X POST "http://127.0.0.1:8000/admin/books?email=admin@bookmarket.com&title=ì‹ ê°„&category=ì†Œì„¤&price=20000&stock=100"
```

### ğŸ› ë””ë²„ê¹… íŒ

#### 1. ë¡œê·¸ í™•ì¸
Uvicorn ì½˜ì†”ì—ì„œ ì‹¤ì‹œê°„ ìš”ì²­/ì‘ë‹µ ë¡œê·¸ í™•ì¸

#### 2. Interactive API Docs
`/docs`ì—ì„œ ê° ì—”ë“œí¬ì¸íŠ¸ì˜ ìŠ¤í‚¤ë§ˆ ë° ì˜ˆì œ í™•ì¸

#### 3. ì¼ë°˜ì ì¸ ì—ëŸ¬

**401 Unauthorized**
- ì›ì¸: ì´ë©”ì¼ì´ users_dbì— ì—†ìŒ
- í•´ê²°: `admin@bookmarket.com` ë˜ëŠ” `user@bookmarket.com` ì‚¬ìš©

**403 Forbidden**
- ì›ì¸: ì¼ë°˜ ì‚¬ìš©ìê°€ ê´€ë¦¬ì API ì ‘ê·¼
- í•´ê²°: `admin@bookmarket.com`ìœ¼ë¡œ ìš”ì²­

**404 Not Found**
- ì›ì¸: ì¡´ì¬í•˜ì§€ ì•ŠëŠ” book_id
- í•´ê²°: `/books`ë¡œ ì¡´ì¬í•˜ëŠ” ID í™•ì¸ í›„ ì‚¬ìš©

**400 Bad Request (ì¬ê³  ë¶€ì¡±)**
- ì›ì¸: ì£¼ë¬¸ ìˆ˜ëŸ‰ì´ ì¬ê³ ë³´ë‹¤ ë§ìŒ
- í•´ê²°: ì±… ìƒì„¸ ì¡°íšŒë¡œ ì¬ê³  í™•ì¸ í›„ ì ì ˆí•œ ìˆ˜ëŸ‰ ì£¼ë¬¸

### ğŸš€ í”„ë¡œë•ì…˜ ë°°í¬ ì‹œ ê³ ë ¤ì‚¬í•­

âš ï¸ **í˜„ì¬ ì½”ë“œëŠ” í•™ìŠµìš©ì…ë‹ˆë‹¤. ì‹¤ì œ ë°°í¬ ì‹œ ë‹¤ìŒì„ ë°˜ë“œì‹œ ê°œì„ í•˜ì„¸ìš”:**

1. **ì¸ì¦ ì‹œìŠ¤í…œ**
   - JWT í† í° ê¸°ë°˜ ì¸ì¦ìœ¼ë¡œ ë³€ê²½
   - ë¹„ë°€ë²ˆí˜¸ í•´ì‹± (bcrypt)
   - ì„¸ì…˜ ê´€ë¦¬

2. **ë°ì´í„°ë² ì´ìŠ¤**
   - ë©”ëª¨ë¦¬ DB â†’ PostgreSQL/MySQL
   - ORM (SQLAlchemy) ì‚¬ìš©
   - ë§ˆì´ê·¸ë ˆì´ì…˜ ê´€ë¦¬

3. **ë³´ì•ˆ**
   - HTTPS ì‚¬ìš©
   - CORS ì„¤ì •
   - Rate limiting
   - Input validation

4. **ì„±ëŠ¥**
   - ìºì‹± (Redis)
   - ë°ì´í„°ë² ì´ìŠ¤ ì¸ë±ì‹±
   - í˜ì´ì§€ë„¤ì´ì…˜ ìµœì í™”

5. **ëª¨ë‹ˆí„°ë§**
   - ë¡œê¹… ì‹œìŠ¤í…œ
   - ì—ëŸ¬ íŠ¸ë˜í‚¹
   - ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§

---

## ğŸ“š ì°¸ê³  ìë£Œ

- [FastAPI ê³µì‹ ë¬¸ì„œ](https://fastapi.tiangolo.com/)
- [FastAPI í•œê¸€ ë¬¸ì„œ](https://fastapi.tiangolo.com/ko/)
- [Uvicorn ë¬¸ì„œ](https://www.uvicorn.org/)
- [Pydantic ë¬¸ì„œ](https://docs.pydantic.dev/)

---

**ë¬¸ì„œ ë²„ì „**: 1.0.0
**ìµœì¢… ìˆ˜ì •ì¼**: 2025-10-29
**ì‘ì„±ì**: Claude Code
